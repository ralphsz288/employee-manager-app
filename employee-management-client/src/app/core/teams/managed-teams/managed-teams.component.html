<div *ngIf="isLoading" class="absolute inset-0 bg-gray-200 bg-opacity-75 flex justify-center items-center">
  <app-loading-spinner></app-loading-spinner>
</div>
<div *ngIf="showError" class="absolute inset-0 bg-gray-200 bg-opacity-75 flex justify-center items-center">
  <div class="bg-red-200  border border-red-600 p-8 pl-20 pr-20 flex flex-col justify-start md:items-center">
      <div class="text-2xl font-roboto font-extrabold text-black">Error</div>
      <div class="px-2">{{error}}</div>
      <button class="bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-12 border border-black rounded" (click)="onErrorButtonClicked()">
          Ok
      </button>
  </div>
</div>
<div *ngIf="showResponseMessage" class="absolute inset-0 bg-gray-200 bg-opacity-75 flex justify-center items-center">
  <div class="bg-blue-200  border border-blue-600 p-8 pl-20 pr-20 flex flex-col justify-start md:items-center">
      <div class="text-2xl font-roboto font-extrabold text-black">Success</div>
      <div class="px-2">{{responseMessage}}</div>
      <button class="bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-12 border border-black rounded" (click)="onRequestSentButtonClicked()">
          Ok
      </button>
  </div>
</div>
<div *ngIf="!isLoading" class="w-[70%] mx-auto p-2 pt-16">
  <div class="flex flex-col md:flex-row justify-between mb-6 mt-12">
    <div class="flex flex-row space-x-8 overflow-auto items-center">
      <div *ngFor="let team of managedTeams; let i = index">
        <button>
          <ng-container *ngIf="i === 0; else otherItems">
            <span class="bg-gradient-to-r from-cyan-400 to-cyan-500 text-2xl rounded-md px-6 py-1 flex items-center border-2 border-cyan-100" style="cursor: default;">
              {{ team.name }}
            </span>
          </ng-container>
          <ng-template #otherItems>
            <span 
              class="bg-gradient-to-r from-orange-400 to-red-400 text-xl rounded-md px-4 flex items-center hover:shadow-xl hover:from-orange-300 hover:to-red-300" 
              (click)="onSelectTeam(i)"
            >
              {{ team.name }}
            </span>
          </ng-template>
        </button>
      </div>
    </div>
    <div class="p-2"></div>
    <div class="flex flex-col pt-1">
      <div class="flex flex-row">
        <app-search-bar></app-search-bar>
        <ng-container *ngIf="!isEditButtonPressed; else editButtonPressed">
          <button (click)="onEditButtonPressed()" mat-raised-button class="!text-gray-400 px-4 !py-2 !rounded-md !shadow-sm hover:!shadow-xl !font-roboto !font-normal">
            <mat-icon>edit</mat-icon>
            Edit
          </button>
        </ng-container>
        <ng-template #editButtonPressed>
          <button (click)="onEditButtonPressed()" mat-raised-button class="!text-gray-400 px-4 !py-2 !rounded-md !shadow-sm hover:!shadow-xl !font-roboto !font-normal">
            <mat-icon>close</mat-icon>
            Close
          </button>
        </ng-template>
      </div>
    </div>
  </div>
  <div *ngIf="isEditButtonPressed" class="flex justify-end">
    <div class="flex flex-col w-32">
      <button (click)="openAddTeamDialog()" mat-raised-button class="!text-gray-400 !rounded-md !shadow-sm hover:!shadow-xl !font-roboto !font-normal mb-2">
        <mat-icon>add</mat-icon>
        Add Team
      </button>
      <button (click)="openAddUserDialog()" mat-raised-button class="!text-gray-400 !rounded-md !shadow-sm hover:!shadow-xl !font-roboto !font-normal mb-2">
        <mat-icon>add</mat-icon>
        Add User 
      </button>
    </div>
  </div>
  <div *ngIf="managedTeams!!" class="gap-6 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4 mb-10">
    <div
      class="bg-red-100 shadow-lg hover:shadow-2xl rounded-2xl border-white border-4">
      <app-profile-card
        [firstName]="teamOwner.firstName"
        [lastName]="teamOwner.lastName"
        [role]="'Team lead'"
        [email]="teamOwner.email"
        [imageUrl]="teamOwner.imageUrl">
      </app-profile-card>
    </div>
    <div
      class="bg-red-100 shadow-lg hover:shadow-2xl rounded-2xl border-white border-4"
      *ngFor="let member of managedTeams[0].members">
      <app-profile-card 
        [firstName]="member.firstName"
        [lastName]="member.lastName"
        [role]="member.role"
        [email]="member.email"
        [imageUrl]="member.imageUrl">
      </app-profile-card>
    </div>
  </div>
</div>
